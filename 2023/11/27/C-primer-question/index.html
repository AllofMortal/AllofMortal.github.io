<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="google-site-verification" content="TZE0rZyIqLl10trYu3BWBWa1Vmz6HFwhb2OcNEK4u-s" />
     <link rel="shortcut icon" href= /img/favicon.ico >
    <title>
        Hexo
    </title>
    <meta name="description" content= 嘿，我是Mortal这是我的博客，用于记录自己的笔记。欢迎指正！ >
    <meta name="keywords" content= Blog,Hexo,Theme,Mortal >
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>
<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-home
 replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            C-primer question
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h1 id="经典习题"><a href="#经典习题" class="headerlink" title="经典习题"></a>经典习题</h1><ol>
<li>编写一个程序，要求用户输入一个华氏温度。程序应读取double类型的值作为温度值，并把该值作为参数传递给一个用户自定义的函数Temperatures()。该函数计算摄氏温度和开氏温度，并以小数点后面两位数字的精度显示3种温度。要使用不同的温标来表示这3个温度值。下面是华氏温度转摄氏温度的公式：<br><strong>摄氏温度 &#x3D; 5.0 &#x2F; 9.0 * (华氏温度 - 32.0)</strong><br>开氏温标常用于科学研究，0表示绝对零，代表最低的温度。下面是摄氏温度转开氏温度的公式：<br><strong>开氏温度 &#x3D; 摄氏温度 + 273.16</strong><br>Temperatures()函数中用const创建温度转换中使用的变量。在main()函数中使用一个循环让用户重复输入温度，当用户输入 q 或其他非数字时，循环结束。scanf()函数返回读取数据的数量，所以如果读取数字则返回1，如果读取q则不返回1。可以使用&#x3D;&#x3D;运算符将scanf()的返回值和1作比较，测试两值是否相等。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">void Temperatures(double fahrenheit);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    double fahrenheit;</span><br><span class="line">    printf(&quot;This program converts fahrenheit to celsius and kelvin.\n&quot;);</span><br><span class="line">    printf(&quot;Enter a temperature in dgrees fahrenheit (q to quit):&quot;);</span><br><span class="line">    while(scanf(&quot;%lf&quot;, &amp;fahrenheit) == 1)   // continue executing loop if user enters valid number</span><br><span class="line">    &#123;</span><br><span class="line">        Temperatures(fahrenheit);   // convert fahrenheit to celsius and kelvin</span><br><span class="line"></span><br><span class="line">        //prompt for new input</span><br><span class="line">        printf(&quot;Enter a temperatures in degrees fahrenheit (q to quit):&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;Bye!\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Temperatures(double fahrenheit)&#123;</span><br><span class="line">    const double FAHR_TO_CEL_SCALE = 5.0 / 9.0;</span><br><span class="line">    const double FAHR_TO_OFFSET = -32.0;</span><br><span class="line">    const double CEL_TO_KEL_OFFSET = 273.16;</span><br><span class="line"></span><br><span class="line">    double celsius = (fahrenheit + FAHR_TO_OFFSET) * FAHR_TO_CEL_SCALE;</span><br><span class="line">    double kelvin = celsius + CEL_TO_KEL_OFFSET;</span><br><span class="line"></span><br><span class="line">    printf(&quot;%.2f degrees fahrenheit is %.2f degrees celsius or %.2f degrees kelvin.\n&quot;,</span><br><span class="line">           fahrenheit, celsius, kelvin);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>编写一个程序，创建一个包含26个元素的数组，并在其中储存26个小写字母。然后打印数组的所有内容。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#define SIZE 26</span><br><span class="line">int main(void)&#123;</span><br><span class="line">    char alphabet[SIZE];</span><br><span class="line">    for (char index=&#x27;a&#x27;;index&lt;&#x27;a&#x27; + SIZE;index++)</span><br><span class="line">        alphabet[index-&#x27;a&#x27;]= index;</span><br><span class="line">    for (int index = 0; index &lt; SIZE; index++)</span><br><span class="line">        printf(&quot;%c &quot;, alphabet[index]);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>编写一个程序，提示用户输入大写字母。使用嵌套循环以下面金字塔型的格式打印字母：<br>   A<br>  ABA<br> ABCBA<br>ABCDCBA<br>  ABCDEDCBA<br>打印这样的图形，要根据用户输入的字母来决定。例如，上面的图形是在用户输入E后的打印结果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">void print_spaces(unsigned int n);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    char uppercase_letter;</span><br><span class="line">    char c1, c2;</span><br><span class="line"></span><br><span class="line">    do      // get uppercase letter from user</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;Enter an uppercases letter:&quot;);</span><br><span class="line">        scanf(&quot;%c&quot;, &amp;uppercase_letter);</span><br><span class="line">    &#125;while (uppercase_letter &lt; &#x27;A&#x27;|| &#x27;Z&#x27; &lt; uppercase_letter);</span><br><span class="line"></span><br><span class="line">    for(c1 = &#x27;A&#x27;; c1 &lt;= uppercase_letter; c1++)</span><br><span class="line">    &#123;</span><br><span class="line">        //print opening spaces</span><br><span class="line">        print_spaces(uppercase_letter -c1);</span><br><span class="line"></span><br><span class="line">        //print letter</span><br><span class="line">        //ascending</span><br><span class="line">        for (c2 = &#x27;A&#x27;; c2 &lt; c1; c2++)&#123;</span><br><span class="line">            printf(&quot;%c&quot;, c2);</span><br><span class="line">        &#125;</span><br><span class="line">        // descending</span><br><span class="line">        for (; &#x27;A&#x27; &lt;= c2; c2--)</span><br><span class="line">        &#123;</span><br><span class="line">            printf(&quot;%c&quot;, c2);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //print closing spaces</span><br><span class="line">        print_spaces(uppercase_letter - c1);</span><br><span class="line">        printf(&quot;\n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void print_spaces(unsigned int n)&#123;</span><br><span class="line">    for (int i = 0; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot; &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>考虑下面两个无限序列：<br>1.0 + 1.0&#x2F;2.0 + 1.0&#x2F;3.0 + 1.0&#x2F;4.0 + …<br>1.0 - 1.0&#x2F;2.0 + 1.0&#x2F;3.0 - 1.0&#x2F;4.0 + …<br>编写一个程序计算这两个无限序列的总和，直到到达某次数。提示：奇数个-1 相乘得-1，偶数个-1相乘得1。让用户交互地输入指定的次数，当用户输入0或负值时结束输入。查看运行100项、1000项、10000项后的总和，是否发现每个序列都收敛于某值？</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    long int limit;</span><br><span class="line">    float sign = 1.0f;</span><br><span class="line">    float series1 = 0, series2 = 0;</span><br><span class="line"></span><br><span class="line">    printf(&quot;Enter a number of terms to sum:&quot;);</span><br><span class="line">    scanf(&quot;%ld&quot;, &amp;limit);</span><br><span class="line"></span><br><span class="line">    for (double i = 1; i &lt;= limit; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        series1 += 1.0f/i;</span><br><span class="line">        series2 += (1.0f/i) * sign;</span><br><span class="line">        sign = -sign;   // toggle sign</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    printf(&quot;The %ldth partial sum for series 1 is: %.5f\n&quot;, limit, series1);</span><br><span class="line">    printf(&quot;The %ldth partial sum for series 2 is: %.5f\n&quot;, limit, series2);</span><br><span class="line"></span><br><span class="line">    //Answer: Series 1 has no limit. Series 2 appears to be bouned above</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>编写一个程序，创建两个包含8个元素的double类型数组，使用循环提示用户为第一个数组输入8 个值。第二个数组元素的值设置为第一个数组对应元素的累积之和。例如，第二个数组的第 4个元素的值是第一个数组前4个元素之和，第二个数组的第5个元素的值是第一个数组前5个元素之和（用嵌套循环可以完成，但是利用第二个数组的第5个元素是第二个数组的第4个元素与第一个数组的第5个元素之和，只用一个循环就能完成任务，不需要使用嵌套循环）。最后，使用循环显示两个数组的内容，第一个数组显示成一行，第二个数组显示在第一个数组的下一行，而且每个元素都与第一个数组各元素相对应。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int array[8], cumulative_sum[8];</span><br><span class="line">    int sum = 0;</span><br><span class="line"></span><br><span class="line">    printf(&quot;Enter 8 integers:\n&quot;);</span><br><span class="line">    for (int i = 0; i &lt; 8; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;array[i]);</span><br><span class="line">        sum += array[i];</span><br><span class="line">        cumulative_sum[i] = sum;</span><br><span class="line">    &#125;</span><br><span class="line">    //display loops</span><br><span class="line">    printf(&quot;Integers:      &quot;);</span><br><span class="line">    for (int i = 0; i &lt; 8; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;%6d &quot;, array[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;\n&quot;);</span><br><span class="line">    printf(&quot;Cumulative sum:&quot;);</span><br><span class="line">    for (int i = 0; i &lt; 8; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;%6d &quot;, cumulative_sum[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>编写一个程序，读取一行输入，然后把输入的内容倒序打印出来。可以把输入储存在char类型的数组中，假设每行字符不超过255。回忆一下，根据%c转换说明，scanf()函数一次只能从输入中读取一个字符，而且在用户按下Enter键时scanf()函数会生成一个换行字符（\n）。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    char line[255];</span><br><span class="line">    int i = 0;     // array</span><br><span class="line">    printf(&quot;Enter a line to reerse:\n&quot;);</span><br><span class="line">    while (scanf(&quot;%c&quot;, &amp;line[i]), line[i] != &#x27;\n&#x27;)</span><br><span class="line">        i++;</span><br><span class="line">    for (; 0 &lt;= i; i--)     //previous loop leaves i in right postion</span><br><span class="line">        printf(&quot;%c&quot;, line[i]);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>line[i] !&#x3D; ‘\n’ 的条件判断使得循环在用户输入的行中包含换行符之前继续执行。当用户按下 Enter 键时，输入的换行符会被检测到，并导致循环结束。</li>
</ul>
<ol start="7">
<li>编写一个统计单词数量的程序（即，该程序读取并报告单词的数量）。该程序还可以计算字符数和行数。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">// wordcnt.c -- 统计字符数、单词数、行数</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;ctype.h&gt;      //为isspace()函数提供原型</span><br><span class="line">#include &lt;stdbool.h&gt;    //为bool、true、false提供定义</span><br><span class="line">#define STOP &#x27;|&#x27;</span><br><span class="line">int main() &#123;</span><br><span class="line">    char c;                 //读入字符</span><br><span class="line">    char prev;              //读入的前一个字符</span><br><span class="line">    long n_chars = 0L;       //字符数</span><br><span class="line">    int n_lines = 0;        //行数</span><br><span class="line">    int n_words = 0;        //单词数</span><br><span class="line">    int p_lines = 0;        //不完整的行数</span><br><span class="line">    bool inword = false;    //如果c在单词中，inword等于true</span><br><span class="line">    printf(&quot;Enter text to be analyzed (| to terminate):\n&quot;);</span><br><span class="line">    prev = &#x27;\n&#x27;;            //用于识别完整的行</span><br><span class="line">    while ((c = getchar()) != STOP)</span><br><span class="line">    &#123;</span><br><span class="line">        n_chars++;          //统计字符  </span><br><span class="line">        if(c == &#x27;\n&#x27;)</span><br><span class="line">            n_lines++;     //统计行</span><br><span class="line">            if (!isspace(c) &amp;&amp; !inword)</span><br><span class="line">            &#123;</span><br><span class="line">                inword = true;  //开始一个新的单词</span><br><span class="line">                n_words++;      //统计单词</span><br><span class="line">            &#125;</span><br><span class="line">            if(isspace(c) &amp;&amp; inword)</span><br><span class="line">                inword = false;     //打到单词的末尾</span><br><span class="line">                prev = c;           //保存字符的值</span><br><span class="line">    &#125;</span><br><span class="line">    if(prev != &#x27;\n&#x27;)</span><br><span class="line">        p_lines = 1;</span><br><span class="line">    printf(&quot;characters = %ld, words = %d, lines = %d,&quot;,</span><br><span class="line">           n_chars, n_words, n_lines);</span><br><span class="line">    printf(&quot;partial lines = %d\n&quot;, p_lines);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>编写程序读取输入，读到#停止，报告ei出现的次数。</li>
</ol>
<ul>
<li>注意<br>该程序要记录前一个字符和当前字符。用“Receive your eieio award”这样的输入来测试。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdbool.h&gt;</span><br><span class="line">#include &lt;ctype.h&gt;</span><br><span class="line"></span><br><span class="line">#define STOP &#x27;#&#x27;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	char ch;</span><br><span class="line">	unsigned int ei_count = 0;</span><br><span class="line">	bool e_flag = false;</span><br><span class="line"></span><br><span class="line">	printf(&quot;This program reads input and counts the number of times the\n&quot;</span><br><span class="line">		   &quot;sequence &#x27;ei&#x27; occurs (case insensitive).\n&quot;);</span><br><span class="line">	printf(&quot;Enter input (%c to stop):\n&quot;, STOP);</span><br><span class="line"></span><br><span class="line">	while ((ch = getchar()) != STOP)</span><br><span class="line">	&#123;</span><br><span class="line">		ch = tolower(ch);</span><br><span class="line">		if (ch == &#x27;e&#x27;)</span><br><span class="line">			e_flag = true;</span><br><span class="line">		else if (ch == &#x27;i&#x27;)</span><br><span class="line">		&#123;</span><br><span class="line">			if (e_flag)</span><br><span class="line">				ei_count++;</span><br><span class="line">			e_flag = false;</span><br><span class="line">		&#125;</span><br><span class="line">		else</span><br><span class="line">			e_flag = false;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	printf(&quot;The sequence &#x27;ei&#x27; occurs %u times.\n&quot;, ei_count);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>编写一个程序，提示用户输入一周工作的小时数，然后打印工资总额、税金和净收入。做如下假设：<br>a.加班（超过40小时） &#x3D; 1.5倍的时间<br>b.税率： 前300美元为15%<br>  续150美元为20%<br>  余下的为25%</li>
</ol>
<p>让程序可以给出一个供选择的工资等级菜单。使用switch完成工资等级选择。运行程序后，显示的菜单应该类似这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*****************************************************************</span><br><span class="line">Enter the number corresponding to the desired pay rate or action:</span><br><span class="line">1) $8.75/hr         2) $9.33/hr</span><br><span class="line">2) $10.00/hr        4) $11.20/hr</span><br><span class="line">3) quit</span><br><span class="line">*****************************************************************</span><br></pre></td></tr></table></figure>
<p>如果选择 1～4 其中的一个数字，程序应该询问用户工作的小时数。程序要通过循环运行，除非用户输入 5。如果输入 1～5 以外的数字，程序应提醒用户输入正确的选项，然后再重复显示菜单提示用户输入。使用#define创建符号常量表示各工资等级和税率。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdbool.h&gt;</span><br><span class="line"></span><br><span class="line">#define RATE_1 8.75</span><br><span class="line">#define RATE_2 9.33</span><br><span class="line">#define RATE_3 10.00</span><br><span class="line">#define RATE_4 11.20</span><br><span class="line"></span><br><span class="line">#define OVERTIME_HOURS 40.0</span><br><span class="line">#define OVERTIME_MULTIPLIER 1.5</span><br><span class="line">#define TAX_RATE_1 0.15</span><br><span class="line">#define TAX_BRACKET_1 300.0</span><br><span class="line">#define TAX_RATE_2 0.20</span><br><span class="line">#define TAX_BRACKET_2 450.0</span><br><span class="line">#define TAX_RATE_3 0.25</span><br><span class="line"></span><br><span class="line">void flush_input_buffer(void);</span><br><span class="line">float calculate_gross_pay(float hours, float rate);</span><br><span class="line">float calulate_taxes(float gross_pay);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    bool exit_flag = false;</span><br><span class="line">    int rate_option;</span><br><span class="line">    double rate, hours, gross_pay, taxes,net_pay;</span><br><span class="line"></span><br><span class="line">    while (1) &#123;</span><br><span class="line">        printf(&quot;*****************************************************************\n&quot;);</span><br><span class="line">        printf(&quot;Enter the number corresponding to the desired pay rate or action:\n&quot;);</span><br><span class="line">        printf(&quot;1) $8.75/hr                                       2) $9.33/hr\n&quot;);</span><br><span class="line">        printf(&quot;3) $10.00/hr                                      4) $11.20/hr\n&quot;);</span><br><span class="line">        printf(&quot;5) quit\n&quot;);</span><br><span class="line">        printf(&quot;*****************************************************************\n&quot;);</span><br><span class="line"></span><br><span class="line">        scanf(&quot;%d&quot;, &amp;rate_option);</span><br><span class="line">        switch (rate_option)</span><br><span class="line">        &#123;</span><br><span class="line">            case 1:</span><br><span class="line">                rate = RATE_1;</span><br><span class="line">                break;</span><br><span class="line">            case 2:</span><br><span class="line">                rate = RATE_2;</span><br><span class="line">                break;</span><br><span class="line">            case 3:</span><br><span class="line">                rate = RATE_3;</span><br><span class="line">                break;</span><br><span class="line">            case 4:</span><br><span class="line">                rate = RATE_4;</span><br><span class="line">                break;</span><br><span class="line">            case 5:</span><br><span class="line">                exit_flag = true;</span><br><span class="line">                break;</span><br><span class="line">            default:        //invalid input</span><br><span class="line">                flush_input_buffer();</span><br><span class="line">                printf(&quot;please enter an integer between 1 and 5.\n&quot;);</span><br><span class="line">                continue;   // repeat main program loop</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (exit_flag)</span><br><span class="line">            break;      //exit program</span><br><span class="line"></span><br><span class="line">        printf(&quot;Enter the number of hours worked in a week:&quot;);</span><br><span class="line">        while (scanf(&quot;%lf&quot;, &amp;hours) != 1 || hours &lt;= 0)</span><br><span class="line">        &#123;</span><br><span class="line">            flush_input_buffer();</span><br><span class="line">            printf(&quot;please enter a positive number.\n&quot;);</span><br><span class="line">            printf(&quot;Enter number of hours worked in a week:&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        gross_pay = calculate_gross_pay(hours, rate);</span><br><span class="line">        taxes = calulate_taxes(gross_pay);</span><br><span class="line">        net_pay = gross_pay - taxes;</span><br><span class="line"></span><br><span class="line">        printf(&quot;Gross pay: $%.2f\n&quot;, gross_pay);</span><br><span class="line">        printf(&quot;Taxes pay: $%.2f\n&quot;, taxes);</span><br><span class="line">        printf(&quot;Net pay: $%.2f\n&quot;, net_pay);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;Bye.\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void flush_input_buffer(void)</span><br><span class="line">&#123;</span><br><span class="line">    while (getchar() != &#x27;\n&#x27;)</span><br><span class="line">        ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">float calculate_gross_pay(float hours, float rate)</span><br><span class="line">&#123;</span><br><span class="line">    if (hours &gt; OVERTIME_HOURS)</span><br><span class="line">        return OVERTIME_HOURS * rate + (hours - OVERTIME_HOURS) * rate * OVERTIME_MULTIPLIER;</span><br><span class="line">    else</span><br><span class="line">        return hours * rate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">float calulate_taxes(float gross_pay)</span><br><span class="line">&#123;</span><br><span class="line">    if (gross_pay &gt; TAX_BRACKET_2)</span><br><span class="line">        return TAX_RATE_3 * (gross_pay - TAX_BRACKET_2) + TAX_RATE_2 * (TAX_BRACKET_2 - TAX_BRACKET_1) + TAX_RATE_1 * TAX_BRACKET_1;</span><br><span class="line">    else if (gross_pay &gt; TAX_BRACKET_1)</span><br><span class="line">        return TAX_RATE_2 * (gross_pay - TAX_BRACKET_1) + TAX_RATE_1 * TAX_BRACKET_1;</span><br><span class="line">    else</span><br><span class="line">        return TAX_RATE_1 * gross_pay;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>switch</code>语句中使用的表达式必须具有整数类型或枚举类型，或者是具有单个转换函数到整数或枚举类型的类类型，无法进行bool等逻辑运算。</li>
</ul>
<ol start="10">
<li>ABC 邮购杂货店出售的洋蓟售价为 2.05美元&#x2F;磅，甜菜售价为 115 美元&#x2F;磅，胡萝卜售价为1.09美元&#x2F;磅。在添加运费之前，100美元的订单有 5%的打折优惠。少于或等于5磅的订单收取 6.5 美元的运费和包装费，5磅~ 20 磅的订单收取14 美元的运费和包装费，超过 20 磅的订单在 14 美元的基础上每续重1磅增加 0.5 美元。</li>
</ol>
<p>编写一个程序，在循环中用 switch 语句实现用户输入不同的字母时有不同的响应，即输入a的响应是让用户输入洋蓟的磅数，b 是甜菜的磅数，c 是胡萝人的磅数，q 是退出订购。程序要记录累计的重量。即，如果用户输入 4磅的甜菜，然后输入 5磅的甜菜，程序应报告9 磅的甜菜。然后，该程序要计算货物总价、折扣(如果有的话) 、运费和包装费。随后，程序应显示所有的购买信息: 物品售价、订购的重量(单位:磅) 、订购的蔬菜费用、订单的总费用、折扣(如果有的话)、运费和包装费，以及所有的费用总额。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdbool.h&gt;</span><br><span class="line"></span><br><span class="line">#define ARTICHOKE_PRICE_PER_LB 2.05</span><br><span class="line">#define BEET_PRICE_PER_LB 1.15</span><br><span class="line">#define CARROT_PRICE_PER_LB 1.09</span><br><span class="line"></span><br><span class="line">#define TRANSPORT_5LB 6.50</span><br><span class="line">#define TRANSPORT_20LB 14.00</span><br><span class="line">#define TRANSPORT_OVER_20_RATE 0.5</span><br><span class="line"></span><br><span class="line">#define DISCOUNT_RATE 0.05</span><br><span class="line"></span><br><span class="line">void flush_input_buffer(void);</span><br><span class="line">float calculate_transport(float weight);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    float artichokeWeight = 0, beetWeight = 0, carrotWeight = 0, totalWeight;</span><br><span class="line">    float artichokePrice, beetPrice, carrotPrice, subtotal, discount, transport, total;</span><br><span class="line">    bool discount_flag;</span><br><span class="line">    float weight;</span><br><span class="line">    char option;</span><br><span class="line"></span><br><span class="line">    while (1)&#123;</span><br><span class="line">        printf(&quot;What would you like to order?\n&quot;);</span><br><span class="line">        printf(&quot;a) artichoke    b) beet     c) carrot   q) quit\n&quot;);</span><br><span class="line">        option = getchar();</span><br><span class="line">        switch(option)</span><br><span class="line">        &#123;</span><br><span class="line">            case (&#x27;q&#x27;):</span><br><span class="line">                printf(&quot;Bye.\n&quot;);</span><br><span class="line">                return 0;       //exit program</span><br><span class="line"></span><br><span class="line">            case (&#x27;a&#x27;): //artichokes</span><br><span class="line">                        printf(&quot;How many pound of artichokes would you like to add?&quot;);</span><br><span class="line">                        if (scanf(&quot;%f&quot;, &amp;weight) == 1)</span><br><span class="line">                            artichokeWeight += weight;</span><br><span class="line">                        else</span><br><span class="line">                        &#123;</span><br><span class="line">                            flush_input_buffer();</span><br><span class="line">                            printf(&quot;Invalid input. Try again.\n&quot;);</span><br><span class="line">                            continue;       //repeat main program loop</span><br><span class="line">                        &#125;</span><br><span class="line">                        break;</span><br><span class="line"></span><br><span class="line">                        case (&#x27;b&#x27;): //beets</span><br><span class="line">                            printf(&quot;How many pounds of beets would you like to add?&quot;);</span><br><span class="line">                            if (scanf(&quot;%f&quot;, &amp;weight) == 1)</span><br><span class="line">                                beetWeight += weight;</span><br><span class="line">                            else</span><br><span class="line">                            &#123;</span><br><span class="line">                                flush_input_buffer();</span><br><span class="line">                                printf(&quot;Invalid input. Try again.\n&quot;);</span><br><span class="line">                                continue;       //repeat main program loop</span><br><span class="line">                            &#125;</span><br><span class="line">                            break;</span><br><span class="line"></span><br><span class="line">            case (&#x27;c&#x27;)://carrots</span><br><span class="line">                            printf(&quot;How many pounds of carrots would you like to add?&quot;);</span><br><span class="line">                            if (scanf(&quot;%f&quot;, &amp;weight) == 1)</span><br><span class="line">                                carrotWeight += weight;</span><br><span class="line">                            else</span><br><span class="line">                            &#123;</span><br><span class="line">                                flush_input_buffer();</span><br><span class="line">                                printf(&quot;Invalid input. Try again.\n&quot;);</span><br><span class="line">                                continue;       //repeat main program loop</span><br><span class="line">                            &#125;</span><br><span class="line">                            break;</span><br><span class="line">            default:</span><br><span class="line">                            printf(&quot;Invalid input. Try again.\n&quot;);</span><br><span class="line">                            continue;       //repeat main program loop</span><br><span class="line">        &#125;</span><br><span class="line">        //calculate subtotal</span><br><span class="line">        artichokePrice = artichokeWeight * ARTICHOKE_PRICE_PER_LB;</span><br><span class="line">        beetPrice = beetWeight * BEET_PRICE_PER_LB;</span><br><span class="line">        carrotWeight = carrotWeight * CARROT_PRICE_PER_LB;</span><br><span class="line">        subtotal = artichokePrice + beetPrice + carrotPrice;</span><br><span class="line"></span><br><span class="line">        //calculate discount</span><br><span class="line">        if (subtotal &gt;= 100)</span><br><span class="line">        &#123;</span><br><span class="line">            discount_flag = true;</span><br><span class="line">            discount = DISCOUNT_RATE * subtotal;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">            discount_flag = false;</span><br><span class="line"></span><br><span class="line">        //calulate transport</span><br><span class="line">        totalWeight = artichokeWeight + beetWeight + carrotWeight;</span><br><span class="line">        transport = calculate_transport(totalWeight);</span><br><span class="line"></span><br><span class="line">        //grand total</span><br><span class="line">        total = subtotal + transport - (discount_flag ? discount : 0.0);</span><br><span class="line"></span><br><span class="line">        printf(&quot;\n&quot;);</span><br><span class="line">        printf(&quot;Your order summary:\n\n&quot;);</span><br><span class="line">        printf(&quot;Artichokes: %.2flbs @ $.2f/lb: $%.2f\n&quot;,</span><br><span class="line">               artichokeWeight, ARTICHOKE_PRICE_PER_LB, artichokePrice);</span><br><span class="line">        printf(&quot;Beets: %.2flbs @ $.2f/lb: $%.2f\n&quot;,</span><br><span class="line">               beetWeight, BEET_PRICE_PER_LB, beetPrice);</span><br><span class="line">        printf(&quot;Carrots: %.2flbs @ $%.2f/lb: $%.2f\n&quot;,</span><br><span class="line">               carrotWeight, CARROT_PRICE_PER_LB, carrotPrice);</span><br><span class="line">        printf(&quot;\n&quot;);</span><br><span class="line">        printf(&quot;Subtotal: $%.2f\n&quot;, subtotal);</span><br><span class="line">        if (discount_flag)</span><br><span class="line">            printf(&quot;%.0f%% discount: $%.2f\n&quot;, DISCOUNT_RATE * 100, discount);</span><br><span class="line">        printf(&quot;Transport charges: $%.2f\n&quot;, transport);</span><br><span class="line">        printf(&quot;Grand total: $%.2f\n&quot;, total);</span><br><span class="line">        printf(&quot;\n&quot;);</span><br><span class="line"></span><br><span class="line">        flush_input_buffer();</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void flush_input_buffer(void)</span><br><span class="line">&#123;</span><br><span class="line">    while (getchar() != &#x27;\n&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">float calculate_transport(float weight)</span><br><span class="line">&#123;</span><br><span class="line">    if (weight &lt; 5.0)</span><br><span class="line">        return TRANSPORT_5LB;</span><br><span class="line">    else if (weight &lt; 20.0)</span><br><span class="line">        return TRANSPORT_20LB;</span><br><span class="line">    else</span><br><span class="line">        return TRANSPORT_20LB + TRANSPORT_OVER_20_RATE * (weight - 20.0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="11">
<li>设计一个名为alter()的函数，接受两个int类型的变量x和y，把它们的值分别改成两个变量之和以及两变量之差。</li>
</ol>
<p>使用指针</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">void alter(int * pa, int * pb)</span><br><span class="line">&#123;</span><br><span class="line">    int temp;</span><br><span class="line">    temp = *pa + *pb;</span><br><span class="line">    *pb = *pa - *pb;</span><br><span class="line">    *pa = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>** or **</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">void alter(int * pa, int * pb)</span><br><span class="line">&#123;</span><br><span class="line">    *pa += *pb;</span><br><span class="line">    *pb = *pa - 2 * *pb;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="12">
<li>power()函数返回一个double类型数的正整数次幂。改进该函数，使其能正确计算负幂。另外，函数要处理0的任何次幂<br>都为0，任何数的0次幂都为1（函数应报告0的0次幂未定义，因此把该值处理为1）。使用递归函数并在程序中测试该函数。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;         //prototype for abs()</span><br><span class="line"></span><br><span class="line">double power(double base, int exponent);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    double base, output;</span><br><span class="line">    int exponent;</span><br><span class="line"></span><br><span class="line">    printf(&quot;Test power() function:\n&quot;);</span><br><span class="line">    printf(&quot;Enter a :double: base and :int: exponent: &quot;);</span><br><span class="line">    while (scanf(&quot;%lf %d&quot;, &amp;base, &amp;exponent) == 2)</span><br><span class="line">    &#123;</span><br><span class="line">        output = power(base, exponent);</span><br><span class="line"></span><br><span class="line">        printf(&quot;%f ^ %d = %f \n&quot;, base, exponent, output);</span><br><span class="line"></span><br><span class="line">        printf(&quot;Enter a :double: base and :int: exponent: &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">double power(double base, int exponent)</span><br><span class="line">&#123;</span><br><span class="line">    double dbl_power;</span><br><span class="line"></span><br><span class="line">    //handle powers of zero</span><br><span class="line">    if (base == 0)</span><br><span class="line">    &#123;</span><br><span class="line">        if (exponent == 0)</span><br><span class="line">        &#123;</span><br><span class="line">            printf(&quot;Warning: 0 ^ 0 is undefined. Using 1.\n&quot;);</span><br><span class="line">            return 1.0;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">            return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    if (exponent == 0) return 1;    //stop recursion</span><br><span class="line"></span><br><span class="line">    dbl_power = base * power(base, abs(exponent) - 1);  // recursion step</span><br><span class="line"></span><br><span class="line">    //if exponent is negative, take reciprocal</span><br><span class="line">    if (exponent &lt; 0) dbl_power = 1 / dbl_power;</span><br><span class="line"></span><br><span class="line">    return dbl_power;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="13">
<li><p>编写一个函数，返回储存在double类型数组中最大值的下标，并在一个简单的程序中测试该函数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line"></span><br><span class="line">#define SIZE 10</span><br><span class="line"></span><br><span class="line">int index_of_max(double *arr, int arr_size);</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	// test index_of_max</span><br><span class="line"></span><br><span class="line">	printf(&quot;Driver for index_of_max: returns index of the largest value stored &quot;</span><br><span class="line">		   &quot;in an array of doubles.\n&quot;);</span><br><span class="line">	putchar(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">	double test[SIZE];</span><br><span class="line"></span><br><span class="line">	srand(time(NULL)); // seed random number generator</span><br><span class="line"></span><br><span class="line">	// initialize test array with random doubles</span><br><span class="line">	for (int i = 0; i &lt; SIZE; i++)</span><br><span class="line">		test[i] = rand() / (double) RAND_MAX;</span><br><span class="line"></span><br><span class="line">	// print test array</span><br><span class="line"></span><br><span class="line">	printf(&quot;%5s &quot;, &quot;Index&quot;);</span><br><span class="line">	for (int i = 0; i &lt; SIZE; i++)</span><br><span class="line">		printf(&quot;| %6d &quot;, i);</span><br><span class="line">	printf(&quot;\n&quot;);</span><br><span class="line">	printf(&quot;%5s &quot;, &quot;Value&quot;);</span><br><span class="line">	for (int i = 0; i &lt; SIZE; i++)</span><br><span class="line">		printf(&quot;| %6.4f &quot;, test[i]);</span><br><span class="line">	printf(&quot;\n&quot;);</span><br><span class="line">	printf(&quot;\n&quot;);</span><br><span class="line"></span><br><span class="line">	// print results </span><br><span class="line">	printf(&quot;The maximum value occurs at index %d\n&quot;, index_of_max(test, SIZE));</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int index_of_max(double *arr, int arr_size)</span><br><span class="line">&#123;</span><br><span class="line">	// return index of max value in array of doubles</span><br><span class="line"></span><br><span class="line">	int index_of_max = 0;</span><br><span class="line">	for (int i = 1; i &lt; arr_size; i++)</span><br><span class="line">		if (*(arr + i) &gt; *(arr + index_of_max))</span><br><span class="line">			index_of_max = i;</span><br><span class="line"></span><br><span class="line">	return index_of_max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写一个函数，把double类型数组中的数据倒序排列，并在一个简单的程序中测试该函数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void reverse_array(double *arr, int arr_size);</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	// test reverse_array()</span><br><span class="line"></span><br><span class="line">	printf(&quot;Testing reverse_array()\n&quot;);</span><br><span class="line"></span><br><span class="line">	double test1[9];</span><br><span class="line">	double test2[10];</span><br><span class="line">	double test3[2];</span><br><span class="line"></span><br><span class="line">	srand(time(NULL));</span><br><span class="line"></span><br><span class="line">	// initialize test array 1 with 9 random doubles</span><br><span class="line">	for (int i = 0; i &lt; 9; i++)</span><br><span class="line">		test1[i] = rand() / (double) RAND_MAX;</span><br><span class="line"></span><br><span class="line">	// initialize test array 2 with 10 random doubles</span><br><span class="line">	for (int i = 0; i &lt; 10; i++)</span><br><span class="line">		test2[i] = rand() / (double) RAND_MAX;</span><br><span class="line"></span><br><span class="line">	// initialize test array 1 with 2 random doubles</span><br><span class="line">	for (int i = 0; i &lt; 2; i++)</span><br><span class="line">		test3[i] = rand() / (double) RAND_MAX;</span><br><span class="line"></span><br><span class="line">	// test array 1</span><br><span class="line"></span><br><span class="line">	printf(&quot;First Test\n&quot;);</span><br><span class="line">	// print original array</span><br><span class="line">	printf(&quot;%10s: &quot;, &quot;Original&quot;);</span><br><span class="line">	for (int i = 0; i &lt; 9; i++)</span><br><span class="line">		printf(&quot;%5.2f &quot;, test1[i]);</span><br><span class="line">	putchar(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">	//print reversed array</span><br><span class="line">	reverse_array(test1, 9);</span><br><span class="line">	printf(&quot;%10s: &quot;, &quot;Reversed&quot;);</span><br><span class="line">	for (int i = 0; i &lt; 9; i++)</span><br><span class="line">		printf(&quot;%5.2f &quot;, test1[i]);</span><br><span class="line">	putchar(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">	// test array 2</span><br><span class="line"></span><br><span class="line">	printf(&quot;Second Test\n&quot;);</span><br><span class="line">	// print original array</span><br><span class="line">	printf(&quot;%10s: &quot;, &quot;Original&quot;);</span><br><span class="line">	for (int i = 0; i &lt; 10; i++)</span><br><span class="line">		printf(&quot;%5.2f &quot;, test2[i]);</span><br><span class="line">	putchar(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">	//print reversed array</span><br><span class="line">	reverse_array(test2, 10);</span><br><span class="line">	printf(&quot;%10s: &quot;, &quot;Reversed&quot;);</span><br><span class="line">	for (int i = 0; i &lt; 10; i++)</span><br><span class="line">		printf(&quot;%5.2f &quot;, test2[i]);</span><br><span class="line">	putchar(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">	// test array 3</span><br><span class="line"></span><br><span class="line">	printf(&quot;Third Test\n&quot;);</span><br><span class="line">	// print original array</span><br><span class="line">	printf(&quot;%10s: &quot;, &quot;Original&quot;);</span><br><span class="line">	for (int i = 0; i &lt; 2; i++)</span><br><span class="line">		printf(&quot;%5.2f &quot;, test3[i]);</span><br><span class="line">	putchar(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">	//print reversed array</span><br><span class="line">	reverse_array(test3, 2);</span><br><span class="line">	printf(&quot;%10s: &quot;, &quot;Reversed&quot;);</span><br><span class="line">	for (int i = 0; i &lt; 2; i++)</span><br><span class="line">		printf(&quot;%5.2f &quot;, test3[i]);</span><br><span class="line">	putchar(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void reverse_array(double *arr, int arr_size)</span><br><span class="line">&#123;</span><br><span class="line">	// reverse an array of double</span><br><span class="line"></span><br><span class="line">	double tmp;</span><br><span class="line"></span><br><span class="line">	for (int i = 0; i &lt; arr_size / 2; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		// swap values between indexes i and (arr_size - 1 - i)</span><br><span class="line">		tmp = arr[i];</span><br><span class="line">		arr[i] = arr[arr_size - 1 - i];</span><br><span class="line">		arr[arr_size - 1 - i] = tmp;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用编程练习2中的拷贝函数，把一个内含7个元素的数组中第3～第5个元素拷贝至内含3个元素的数组中。该函数本身不需要修改，只需要选择合适的实际参数（实际参数不需要是数组名和数组大小，只需要是数组元素的地址和待处理元素的个数）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">void copy_ptrs(double *target, double *source_start, double *source_end);</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">	double source[7] = &#123;2.4, 5.9, 7.8, 1.5, 3.3, 5.3, 6.8&#125;;</span><br><span class="line">	double target[3];</span><br><span class="line"></span><br><span class="line">	copy_ptrs(target, source + 2, source + 5);</span><br><span class="line"></span><br><span class="line">	// print arrays</span><br><span class="line">	for (int i = 0; i &lt; 7; i++)</span><br><span class="line">		printf(&quot;%.1f &quot;, source[i]);</span><br><span class="line">	putchar(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">	for (int i = 0; i &lt; 3; i++)</span><br><span class="line">		printf(&quot;%.1f &quot;, target[i]);</span><br><span class="line">	putchar(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void copy_ptrs(double *target, double *source_start, double *source_end)</span><br><span class="line">&#123;</span><br><span class="line">	// copy arr using pointer notation and pointer endpoint</span><br><span class="line"></span><br><span class="line">	for (double *ptr = source_start; ptr &lt; source_end; ptr++, target++)</span><br><span class="line">		*target = *ptr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写一个程序，初始化一个double类型的3×5二维数组，使用一个处理变长数组的函数将其拷贝至另一个二维数组中。还要编写一个以变长数组为形参的函数以显示两个数组的内容。这两个函数应该能处理任意N×M数组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#define ROWS 3</span><br><span class="line">#define COLUMNS 5</span><br><span class="line"></span><br><span class="line">void copy_2dim_arr(int rows, int cols, double source[rows][cols], double target[rows][cols]);</span><br><span class="line">void print_2dim_arr(int rows, int cols, double arr[rows][cols]);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    double array1[ROWS][COLUMNS] = &#123;</span><br><span class="line">            &#123;4.3, 5.7, 2.1, 6.6, .8&#125;,</span><br><span class="line">            &#123;5.6, 23.5, 73.2, 12.3, 123&#125;,</span><br><span class="line">            &#123;22.1, 35.3, 6.35, 0.132, 11.1&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    double array2[ROWS][COLUMNS];</span><br><span class="line"></span><br><span class="line">    // copy array1 to array2</span><br><span class="line">    copy_2dim_arr(ROWS, COLUMNS, array1, array2);</span><br><span class="line"></span><br><span class="line">    // print contents of arrays</span><br><span class="line">    printf(&quot;Array 1:\n&quot;);</span><br><span class="line">    print_2dim_arr(ROWS, COLUMNS, array1);</span><br><span class="line">    putchar(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">    printf(&quot;Array2:\n&quot;);</span><br><span class="line">    print_2dim_arr(ROWS, COLUMNS, array2);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void copy_2dim_arr(int rows, int cols, double source[rows][cols], double target[rows][cols])</span><br><span class="line">&#123;</span><br><span class="line">    // copy one two-dimensional array to another</span><br><span class="line">    for (int i = 0; i &lt; rows; i++)&#123;</span><br><span class="line">        for (int j = 0; j &lt; cols; j++)</span><br><span class="line">            target[i][j] = source[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void print_2dim_arr(int rows, int cols, double arr[rows][cols])</span><br><span class="line">&#123;</span><br><span class="line">    //print the contents of a two-dimensional array</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; rows; i++) &#123;</span><br><span class="line">        for (int j = 0; j &lt; cols; j++)</span><br><span class="line">            printf(&quot; %10.3f &quot;, arr[i][j]);</span><br><span class="line"></span><br><span class="line">        putchar(&#x27;\n&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写一个函数，把两个数组中相对应的元素相加，然后把结果储存到第 3 个数组中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line"></span><br><span class="line">#define SIZE 10</span><br><span class="line">void add_arrays(int *addend1, int *addend2, int *sum, int array_length);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    //test add_arrays</span><br><span class="line">    srand(time(NULL));</span><br><span class="line"></span><br><span class="line">    int array1[SIZE];</span><br><span class="line">    int array2[SIZE];</span><br><span class="line">    int sum[SIZE];</span><br><span class="line"></span><br><span class="line">    // initialize arrays with random ints</span><br><span class="line">    for (int i = 0; i &lt; SIZE; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        array1[i] = rand() % 20;</span><br><span class="line">        array2[i] = rand() % 20;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // get sum of arrays</span><br><span class="line">    add_arrays(array1, array2, sum, SIZE);</span><br><span class="line"></span><br><span class="line">    //print arrays</span><br><span class="line">    printf(&quot;%8s %8s %8s\n&quot;, &quot;Array 1&quot;, &quot;Array 2&quot;, &quot;Sum&quot;);</span><br><span class="line">    for (int i = 0; i &lt; SIZE; i++)</span><br><span class="line">        printf(&quot;%8d %8d %8d\n&quot;, array1[i], array2[i], sum[i]);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void add_arrays(int *addend1, int *addend2, int *sum, int array_length)</span><br><span class="line">&#123;</span><br><span class="line">    // calculate elementwise sum of two arrays</span><br><span class="line">    for (int *tar = sum; tar &lt; sum + array_length; tar++, addend1++, addend2++)</span><br><span class="line">        *tar = *addend1 + *addend2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写一个程序，提示用户输入3组数，每组数包含5个double类型的数（假设用户都正确地响应，不会输入非数值数据）。该程序应完成下列任<br>务。<br>a.把用户输入的数据储存在3×5的数组中<br>b.计算每组（5个）数据的平均值<br>c.计算所有数据的平均值<br>d.找出这15个数据中的最大值<br>e.打印结果<br>每个任务都要用单独的函数来完成（使用变长数组作为函数形参的方式）。完成任务b，要编写一个计算并返回一维数组平均值的函数，利用循环调用该函数3次。对于处理其他任务的函数，应该把整个数组作为参数，完成任务c和d的函数应把结果返回主调函数。</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#define ROWS 3</span><br><span class="line">#define COLUMNS 5</span><br><span class="line"></span><br><span class="line">void input_data(int rows, int columns, double array[][5]);</span><br><span class="line">double compute_row_average(double *array, int cols);</span><br><span class="line">double compute_array_average(int rows, int cols, double array[rows][cols]);</span><br><span class="line">double largest_vlue(int rows, int cols, double array[rows][cols]);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    double data[ROWS][COLUMNS];</span><br><span class="line"></span><br><span class="line">    input_data(ROWS, COLUMNS, data);</span><br><span class="line"></span><br><span class="line">    //print row averages</span><br><span class="line">    printf(&quot;Row Averages:\n&quot;);</span><br><span class="line">    for (int i = 0; i &lt; ROWS; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;\t Average for row %d: %3.f\n&quot;, i + 1,</span><br><span class="line">               compute_row_average(data[i], COLUMNS));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //print array average</span><br><span class="line">    printf(&quot;Average for entire array: %.3f\n&quot;,</span><br><span class="line">           compute_array_average(ROWS,COLUMNS, data));</span><br><span class="line"></span><br><span class="line">    // print largest value</span><br><span class="line">    printf(&quot;Maximum array value: %.3f\n&quot;,</span><br><span class="line">           largest_vlue(ROWS, COLUMNS, data));</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void input_data(int rows, int columns, double array[][5])</span><br><span class="line">&#123;</span><br><span class="line">    printf(&quot;Enter 3 groups of 5 double values each:\n&quot;);</span><br><span class="line">    for (int i = 0; i &lt; rows; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;Grop %d:&quot;, i + 1);</span><br><span class="line">        for (int j = 0; j &lt; columns; j++)</span><br><span class="line">            scanf(&quot;%lf&quot;, array[i] + j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">double compute_row_average(double *array, int cols)</span><br><span class="line">&#123;</span><br><span class="line">    double total = 0;</span><br><span class="line">    for (int i = 0; i &lt; cols; i++)</span><br><span class="line">        total += array[i];</span><br><span class="line"></span><br><span class="line">    return total / cols;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">double compute_array_average(int rows, int cols, double array[rows][cols])</span><br><span class="line">&#123;</span><br><span class="line">    double total = 0;</span><br><span class="line">    for (int i = 0; i &lt; rows; i++)</span><br><span class="line">        for (int j = 0; j &lt; cols; j++)</span><br><span class="line">            total += array[i][j];</span><br><span class="line"></span><br><span class="line">    return total / (rows * cols);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">double largest_vlue(int rows, int cols, double array[rows][cols])</span><br><span class="line">&#123;</span><br><span class="line">    double max = array[0][0];</span><br><span class="line">    for (int i = 0; i &lt; rows; i++)</span><br><span class="line">        for (int j = 0; j &lt; cols; j++)</span><br><span class="line">            if (array[i][j] &gt; max)</span><br><span class="line">                max = array[i][j];</span><br><span class="line"></span><br><span class="line">    return max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="19">
<li>编写一个函数，读入10个字符串或者读到EOF时停止。该程序为用户提供一个有5个选项的菜单：打印源字符串列表、以ASCII中的顺序打印字<br>符串、按长度递增顺序打印字符串、按字符串中第1个单词的长度打印字符串、退出。菜单可以循环显示，除非用户选择退出选项。当然，该程序要能真正完成菜单中各选项的功能。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;ctype.h&gt;</span><br><span class="line"></span><br><span class="line">#define COUNT 10</span><br><span class="line">#define LIMIT 50</span><br><span class="line"></span><br><span class="line">void sort_ASCII(char *strings[], int n);</span><br><span class="line">void sort_length(char *strings[], int n);</span><br><span class="line">int fwlen(char *string);</span><br><span class="line">void sort_firstword_length(char *strings[], int n);</span><br><span class="line">char * get(char *string, int n);</span><br><span class="line">void print_menu(void);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    char strings[COUNT][LIMIT];</span><br><span class="line">    char *strptrs[COUNT];</span><br><span class="line">    char * success;</span><br><span class="line">    char ch;</span><br><span class="line"></span><br><span class="line">    // initialize array of pointer</span><br><span class="line">    for (int i = 0; i &lt; COUNT; i++)</span><br><span class="line">        strptrs[i] = strings[i];</span><br><span class="line"></span><br><span class="line">    printf(&quot;Enter up to 10 strings (EOF to stop): \n&quot;);</span><br><span class="line"></span><br><span class="line">    //read up to ten strings from input</span><br><span class="line">    for (int i = 0; i &lt; COUNT; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;%d: &quot;, i + 1);</span><br><span class="line">        success = get(strings[i], LIMIT);</span><br><span class="line"></span><br><span class="line">        // if EOF encountered, stop reading strings</span><br><span class="line">        if (!success)</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;\n&quot;);</span><br><span class="line"></span><br><span class="line">    print_menu();</span><br><span class="line">    while((ch = getchar()) != &#x27;q&#x27;)</span><br><span class="line">    &#123;</span><br><span class="line">        //discard rest of the line</span><br><span class="line">        if (ch != &#x27;\n&#x27;)</span><br><span class="line">            while (getchar() != &#x27;\n&#x27;)</span><br><span class="line">                continue;</span><br><span class="line"></span><br><span class="line">        // sort strings</span><br><span class="line">        switch (ch) &#123;</span><br><span class="line">            case (&#x27;a&#x27;):</span><br><span class="line">                sort_ASCII(strptrs, COUNT);</span><br><span class="line">                break;</span><br><span class="line">            case (&#x27;l&#x27;):</span><br><span class="line">                sort_length(strptrs, COUNT);</span><br><span class="line">                break;</span><br><span class="line">            case (&#x27;f&#x27;):</span><br><span class="line">                sort_firstword_length(strptrs, COUNT);</span><br><span class="line">                break;</span><br><span class="line">            case (&#x27;o&#x27;):</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                printf(&quot;Invalid input. Try again.\n\n&quot;);</span><br><span class="line">                print_menu();</span><br><span class="line">                continue;</span><br><span class="line">        &#125;</span><br><span class="line">        // print sorted strings</span><br><span class="line">        puts(&quot;&quot;);</span><br><span class="line">        for (int i = 0; i &lt; COUNT; i++)</span><br><span class="line">            puts(strptrs[i]);</span><br><span class="line"></span><br><span class="line">        puts(&quot;&quot;);</span><br><span class="line">        print_menu();</span><br><span class="line">    &#125;</span><br><span class="line">    puts(&quot;Bye&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void sort_ASCII(char *strings[], int n)</span><br><span class="line">&#123;</span><br><span class="line">    // sort array of string pointers by ASCII collating sequence</span><br><span class="line"></span><br><span class="line">    char *tmp;</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; n; i++)</span><br><span class="line">        for (int j = 0; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            if (strcmp(strings[i], strings[j]) &gt; 0)</span><br><span class="line">            &#123;</span><br><span class="line">                    tmp = strings[i];</span><br><span class="line">                    strings[i] = strings[j];</span><br><span class="line">                    strings[j] = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void sort_length(char *strings[], int n)</span><br><span class="line">&#123;</span><br><span class="line">    // sort array of string pointer by length</span><br><span class="line"></span><br><span class="line">    char *tmp;</span><br><span class="line"></span><br><span class="line">    // 冒泡排序</span><br><span class="line">    for (int i = 0; i &lt; n - 1; i++)</span><br><span class="line">        for (int j = i + 1; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            if (strlen(strings[i]) &gt; strlen(strings[j]))</span><br><span class="line">            &#123;</span><br><span class="line">                tmp = strings[i];</span><br><span class="line">                strings[i] = strings[j];</span><br><span class="line">                strings[j] = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int fwlen(char *string)</span><br><span class="line">&#123;</span><br><span class="line">    // return length of first word of string</span><br><span class="line"></span><br><span class="line">    int length = 0;</span><br><span class="line"></span><br><span class="line">    // skip leading whitespace</span><br><span class="line">    while (isspace(*string))</span><br><span class="line">        string++;</span><br><span class="line"></span><br><span class="line">    // count first word length</span><br><span class="line">    while (!isspace(*string))</span><br><span class="line">    &#123;</span><br><span class="line">        length++;</span><br><span class="line">        string++;</span><br><span class="line">    &#125;</span><br><span class="line">    return  length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void sort_firstword_length(char *strings[], int n)</span><br><span class="line">&#123;</span><br><span class="line">    // sort array of string pointers by ASCII collating sequence</span><br><span class="line"></span><br><span class="line">    char *tmp;</span><br><span class="line"></span><br><span class="line">    for (int i =  0; i &lt; n; i++)</span><br><span class="line">        for (int j = i + 1; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            if (fwlen(strings[i]) &gt; fwlen(strings[j]))</span><br><span class="line">            &#123;</span><br><span class="line">                tmp  = strings[i];</span><br><span class="line">                strings[i] = strings[j];</span><br><span class="line">                strings[j] = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">char * get(char *string, int n)</span><br><span class="line">&#123;</span><br><span class="line">    // wrapper for fgets that repalces first newline with null</span><br><span class="line"></span><br><span class="line">    char *ret_val = fgets(string, n, stdin);</span><br><span class="line">    while (*string != &#x27;\0&#x27;)</span><br><span class="line">    &#123;</span><br><span class="line">        if (*string == &#x27;\n&#x27;)</span><br><span class="line">            *string = &#x27;\0&#x27;;</span><br><span class="line">        string++;</span><br><span class="line">    &#125;</span><br><span class="line">    return ret_val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void print_menu(void)</span><br><span class="line">&#123;</span><br><span class="line">    puts(&quot;Choose an option: &quot;);</span><br><span class="line">    puts(&quot;(o) Print strings in original order.&quot;);</span><br><span class="line">    puts(&quot;(a) Print strings in ASCII collating sequence.&quot;);</span><br><span class="line">    puts(&quot;(l) Print strings ordered by length.&quot;);</span><br><span class="line">    puts(&quot;(f) Print strings ordered by length of the first word.&quot;);</span><br><span class="line">    puts(&quot;(q) Quit.&quot;);</span><br><span class="line">    puts(&quot;&quot;);</span><br><span class="line">    puts(&quot;Enter a character: &quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="20">
<li>编写一个通过命令行运行的程序计算幂。第1个命令行参数是double类型的数，作为幂的底数，第2个参数是整数，作为幂的指数。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;math.h&gt;</span><br><span class="line"></span><br><span class="line">void print_error_message(void);</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[]) &#123;</span><br><span class="line">    double base;</span><br><span class="line">    long power;</span><br><span class="line">    char *end;</span><br><span class="line"></span><br><span class="line">    if (argc != 3)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error_message();</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // get exponent</span><br><span class="line">    end = argv[2];</span><br><span class="line">    while(*end != &#x27;\0&#x27;)</span><br><span class="line">        end++;</span><br><span class="line">    power = strtol(argv[2], &amp;end, 10);</span><br><span class="line"></span><br><span class="line">    if(*end)    //error condition</span><br><span class="line">    &#123;</span><br><span class="line">        print_error_message();</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;           //strtol 函数会将 end 指向转换后的字符串的最后一个字符的下一个位置，通常是字符串的结束符 \0。</span><br><span class="line"></span><br><span class="line">    printf(&quot;%f ^ %ld = %f\n&quot;, base, power, pow(base, power));</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void print_error_message(void)</span><br><span class="line">&#123;</span><br><span class="line">    puts(&quot;Usage: &lt;program_name&gt; &lt;arg1 base:double&gt; &lt;arg2 power:int&gt;&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="21">
<li>编写一个程序，生成1000个1～10范围内的随机数。不用保存或打印这些数字，仅打印每个数出现的次数。用 10 个不同的种子值运行，生成的<br>数字出现的次数是否相同？可以使用本章自定义的函数或ANSI C的rand()和srand()函数，它们的格式相同。这是一个测试特定随机数生成器随机性的方法。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line"></span><br><span class="line">#define SIZE 1000</span><br><span class="line">#define RANGE 10</span><br><span class="line"></span><br><span class="line">void generate_random_numbers(void);</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    for (int seed= 1; seed &lt;= 10; seed++)</span><br><span class="line">    &#123;</span><br><span class="line">        printf(&quot;Seed: %d\n&quot;, seed);</span><br><span class="line">        generate_random_numbers();</span><br><span class="line">        printf(&quot;\n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void generate_random_numbers(void)</span><br><span class="line">&#123;</span><br><span class="line">    srand((unsigned int) time(NULL));      // 设置种子值为当前时间</span><br><span class="line"></span><br><span class="line">    int counts[RANGE] = &#123;0&#125;;      // 用于记录每个数字出现的次数</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; SIZE; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        int random_count = rand() % RANGE + 1;      // 生成1~10范围内的随机数</span><br><span class="line">        counts[random_count - 1]++;     // 更新对应数字出现次数的计数</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 打印每个数字出现的次数</span><br><span class="line">    for (int i = 0; i &lt; RANGE; i++)</span><br><span class="line">        printf(&quot;Number %d: %d times\n&quot;, i + 1, counts[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="22">
<li>编写一个符合以下描述的函数。首先，询问用户需要输入多少个单词。然后，接收用户输入的单词，并显示出来，使用malloc()并回答第1个问<br>题（即要输入多少个单词），创建一个动态数组，该数组内含相应的指向char的指针（注意，由于数组的每个元素都是指向char的指针，所以用于储<br>存malloc()返回值的指针应该是一个指向指针的指针，且它所指向的指针指向char）。在读取字符串时，该程序应该把单词读入一个临时的char数组，使用malloc()分配足够的存储空间来储存单词，并把地址存入该指针数组（该数组中每个元素都是指向 char 的指针）。然后，从临时数组中把单词拷贝到动态分配的存储空间中。因此，有一个字符指针数组，每个指针都指向一个对象，该对象的大小正好能容纳被储存的特定单词。下面是该程序的一个运行示例：</li>
</ol>
<p>How many words do you wish to enter? 5<br>Enter 5 words now:<br>I enjoyed doing this exerise<br>Here are your words:<br>I<br>enjoyed<br>doing<br>this<br>exercise</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line">#define MAX_WORD_LENGTH 20      // 单词的最大长度</span><br><span class="line"></span><br><span class="line">void get_words(int n);</span><br><span class="line"></span><br><span class="line">int main(void) &#123;</span><br><span class="line">    int num_words;</span><br><span class="line"></span><br><span class="line">    printf(&quot;How many words do you wish to enter?&quot;);</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;num_words);</span><br><span class="line"></span><br><span class="line">    while (getchar() != &#x27;\n&#x27;)</span><br><span class="line">        continue;       // 清楚输入缓冲区</span><br><span class="line"></span><br><span class="line">    if (num_words &gt; 0)</span><br><span class="line">        get_words(num_words);</span><br><span class="line">    else</span><br><span class="line">        printf(&quot;No words to enter.\n&quot;);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void get_words(int n)</span><br><span class="line">&#123;</span><br><span class="line">    char **words = (char **)malloc(n * sizeof(char *));     // 动态分配存储单词指针的数组</span><br><span class="line">    if (words == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        fprintf(stderr, &quot;Memory allocation failed. Exiting,\n&quot;);</span><br><span class="line">        exit(EXIT_FAILURE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    printf(&quot;Enter %d words now:\n&quot;, n);</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        char temp[MAX_WORD_LENGTH];</span><br><span class="line">        scanf(&quot;%s&quot;, temp);      // 读取单词到临时数组中</span><br><span class="line">        words[i] = (char *) malloc((strlen(temp) + 1) * sizeof(char));      // 为单词分配存储空间</span><br><span class="line">        if (words[i] == NULL)</span><br><span class="line">        &#123;</span><br><span class="line">            fprintf(stderr, &quot;Memory allocation failed. Exiting.\n&quot;);</span><br><span class="line">            exit(EXIT_FAILURE);</span><br><span class="line">        &#125;</span><br><span class="line">        strcpy(words[i], temp);     // 复制单词到动态分配的存储空间中</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    printf(&quot;Here are your words:\n&quot;);</span><br><span class="line">    for (int i = 0; i &lt; n; i++)</span><br><span class="line">        printf(&quot;%s\n&quot;, words[i]);</span><br><span class="line"></span><br><span class="line">    // 释放分配的内存</span><br><span class="line">    for (int i = 0; i &lt; n; i++)</span><br><span class="line">        free(words[i]);</span><br><span class="line">    free(words);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="复习题"><a href="#复习题" class="headerlink" title="复习题"></a>复习题</h1><p>假设在测试程序时要暂时跳过一块代码，如何在不移除这块代码的前提下完成这项任务？</p>
<p>使用条件编译指令。一种方法是使用<code>#ifndef</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#define _SKIP_      /* 如果不需要跳过代码，则删除这条指令 */</span><br><span class="line">#ifndef _SKIP_</span><br><span class="line"></span><br><span class="line">/* 需要跳过的代码 */</span><br><span class="line"></span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
    </div>

    
</div>
    <div class="footer" id="footer">
    <p><h4>版权所有 © 2020 | 作者: Mortal | 主题 By <a class="theme-author" target="_blank" rel="noopener" href="https://github.com/Xunzhuo/hexo-theme-coder" style="font-size:14px; color: #969696">Coder</a></h4>
    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <span id="busuanzi_container_site_pv">本站浏览总访问量: <span id="busuanzi_value_site_pv"></span></span>
        <span class="post-meta-divider">|</span>
        <span id="busuanzi_container_site_uv">本站访问人数: <span id="busuanzi_value_site_uv"></span></span>
    
    <label class="el-switch el-switch-blue el-switch-sm" style="vertical-align: sub;">
        <input type="checkbox" name="switch" id="update_style">
        <span class="el-switch-style"></span>
    </label>

    <!--         <script type="text/javascript">
    var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
    document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
    </script> -->
</p>
</div>

<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="NOsswOncKgc8HOxqo9oxIWlX-gzGzoHsz">
<input type="hidden" id="valine_appKey" value="z1FihjWEbS8uIfUQdmCtK7zz">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
color: #698fca;
}
.v .vlist .vcard .vhead .vsys {
color: #3a3e4a;
}
.v .vlist .vcard .vh .vmeta .vat {
color: #638fd5;
}
.v .vlist .vcard .vhead .vnick {
color: #6ba1ff;
}
.v a {
color: #8696b1;
}
.v .vlist .vcard .vhead .vnick:hover {
color: #669bfc;
}
</style>
    <script type="text/javascript" color="173,174,173" opacity='1' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
</body>
</html>
